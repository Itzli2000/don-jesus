---
import { getLangFromUrl } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url) as "en" | "es";
const currentPath = Astro.url.pathname;

let otherLangPath = "";
if (lang === "en") {
  otherLangPath = currentPath.replace(/^\/en/, "/es");

  if (otherLangPath.includes("/events")) {
    otherLangPath = otherLangPath.replace("/events", "/eventos");
  }

  if (otherLangPath.includes("/calendar")) {
    otherLangPath = otherLangPath.replace("/calendar", "/calendario");
  }
} else {
  otherLangPath = currentPath.replace(/^\/es/, "/en");

  if (otherLangPath.includes("/eventos")) {
    otherLangPath = otherLangPath.replace("/eventos", "/events");
  }

  if (otherLangPath.includes("/calendario")) {
    otherLangPath = otherLangPath.replace("/calendario", "/calendar");
  }
}

if (otherLangPath === currentPath) {
  otherLangPath = lang === "en" ? "/es" : "/en";
}
---

<div class="language-switcher">
  <a
    href={otherLangPath}
    class="px-2 py-1 bg-gray-200 hover:bg-gray-300 rounded"
  >
    {lang === "en" ? "ES" : "EN"}
  </a>
</div>
